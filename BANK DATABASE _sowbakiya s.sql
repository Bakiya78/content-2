CREATE DATABASE BANK_MANAGEMENT;
USE BANK_MANAGEMENT;

-- BANK DETAILS:
CREATE TABLE BANK(
bank_ID INT primary key,
bank_name varchar(20) not null,
bank_address varchar(20)
); 
INSERT INTO BANK VALUES(001,'SBI','Ganga colony');
INSERT INTO BANK VALUES(002,'PNB','jayanagar');
INSERT INTO BANK VALUES(003,'ICICI','Geeta colony');
INSERT INTO BANK VALUES(004,'IDBI','Bakery street');
INSERT INTO BANK VALUES(005,'AXIS','Phenoix Mall');
SELECT * FROM BANK ;

 -- BRANCH DETAILS:
 CREATE TABLE BRANCH(
bank_ID int,
branch_ID int primary key,
branch_name varchar(20) not null,
branch_address varchar(20), FOREIGN KEY(bank_ID) REFERENCES BANK(BANK_ID)); 

INSERT INTO BRANCH VALUES(001,101,'Delhi','Gandhi Nagar');
INSERT INTO BRANCH VALUES(002,102,'chennai','little mount');
INSERT INTO BRANCH VALUES(003,103,'karnataka','bharathipuram');
INSERT INTO BRANCH VALUES(004,104,'karpadi','Thondarpat');
INSERT INTO BRANCH VALUES(005,105,'Assam','Kaziranga');
SELECT * FROM BRANCH ;
UPDATE BRANCH SET BRANCH_NAME='NORTH CHENNAI' WHERE BRANCH_ID=105;

-- ACCOUNT DETAILS:
CREATE TABLE ACCOUNT(
account_ID int primary key,
branch_ID int,
name varchar(20) not null,
account_type varchar(20) not null,
FOREIGN KEY(branch_ID) REFERENCES BRANCH(BRANCH_ID));
 
INSERT INTO ACCOUNT VALUES(201,101,'Rajeev','Salary account');
INSERT INTO ACCOUNT VALUES(202,102,'Ravi','Saving account');
INSERT INTO ACCOUNT VALUES(203,103,'Nandha','F.D account');
INSERT INTO ACCOUNT VALUES(204,104,'Anu','R.D account');
INSERT INTO ACCOUNT VALUES(205,105,'Thansika','NRI account');
SELECT * FROM ACCOUNT ;
SELECT * FROM ACCOUNT WHERE ACCOUNT_ID IN('SALARY ACCOUNT','NRI ACCOUNT');
SELECT * FROM ACCOUNT WHERE  NAME  LIKE '%N%';
-- SINGLEROW SUBSTRING:
-- WAQTD CHANGE THE FIRST LETTER OF THE NAME AS CAPITAL:
SELECT CONCAT(UPPER(SUBSTR(NAME,1,1)),(SUBSTR(NAME,2))) FROM ACCOUNT;

-- LOAN DETAILS:
CREATE TABLE LOAN(
account_ID int,
loan_ID int primary key,
name varchar(20) not null,
loan_type varchar(20) not null,
loan_amount int,
FOREIGN KEY(account_ID) REFERENCES ACCOUNT(ACCOUNT_ID)); 
INSERT INTO LOAN VALUES(201,301,'Rajeev','Personal loan',10000);
INSERT INTO LOAN VALUES(202,302,'Ravi','Home loan',20000);
INSERT INTO LOAN VALUES(203,303,'Nandha','Car loan',15000);
INSERT INTO LOAN VALUES(204,304,'Anu','Education loan',25000);
INSERT INTO LOAN VALUES(205,305,'Thansika','Business loan',30000);
SELECT * FROM LOAN ;
-- WAQTD LOAN TYPE OF THE GIVEN NAME ANU,RAVI:
SELECT loan_type FROM LOAN WHERE NAME='ANU' or NAME='RAVI';

-- WAQTD ID OF TABLE LOAN AND ACCOUNT OF THE GIVEN LOAN AMOUNT RANGE 11000 TO 26000:
SELECT loan_id,account_id FROM LOAN WHERE loan_amount BETWEEN 11000 AND 26000;

-- WAQTD TABLE LOAN WHERE NAME NOT ANU,RAVI:
SELECT * FROM LOAN WHERE NAME NOT IN('ANU' ,'RAVI');

-- MULTIROW :
-- WAQTD MAXIMIUM,MINIMUM,AVERGE,SUM VALUE OF LOAN AMOUNT:
SELECT MAX(loan_amount),MIN(loan_amount),AVG(loan_amount),SUM(loan_amount) FROM LOAN;

-- SUBQUERY:
-- WAQTD DETAILS OF TABLE LOAN OF THE GIVEN ACCOUNT ID IS 202:
SELECT * FROM LOAN WHERE name=(SELECT name FROM ACCOUNT WHERE ACCOUNT_ID=202 );

-- GROUP BY,HAVING:
-- WAQTD TOTAL COUNT OF TABLE LOAN WITH MIN  LOAN AMOUNT GREATER THAN OR EQUALTO 20000:
SELECT COUNT(*) FROM LOAN GROUP BY NAME HAVING MIN(loan_amount) >=20000;

-- CLIENT DETAILS:
CREATE TABLE CLIENT(
account_ID int,
client_ID int primary key,
name varchar(20) not null,
client_address varchar(500) not null,
FOREIGN KEY(account_ID) REFERENCES ACCOUNT(ACCOUNT_ID)); 
INSERT INTO CLIENT VALUES(201,401,'Rajeev','21,Gandhi Nagar');
INSERT INTO CLIENT VALUES(202,402,'Ravi','16,Vijay Nagar');
INSERT INTO CLIENT VALUES(203,403,'Sowbakiya','13,Geeta colony');
INSERT INTO CLIENT VALUES(204,404,'Nandha','11, Savedh Nagar');
INSERT INTO CLIENT VALUES(205,405,'Thansika','07,godha colony');
SELECT * FROM CLIENT ;

-- JOINS:
-- COMBAINE TWO TABLES LOAN AND CLIENT:
SELECT loan.name,client.name FROM LOAN CROSS JOIN CLIENT ;

-- WAQTD DETAILS OF TABLE ACCOUNT AND CLIENT:
SELECT * FROM ACCOUNT,CLIENT;

-- WAQTD DETAILS OF TABLE BANK AND BRANCH OF THE GIVEN  COMMON BANK ID:
SELECT * FROM BANK  LEFT OUTER JOIN BRANCH ON BANK.BANK_ID=BRANCH.BANK_ID;

-- WAQTD DETAILS OF TABLE ACCOUNT AND LOAN OF THE GIVEN COMMON ACCOUNT ID:
SELECT * FROM ACCOUNT  RIGHT OUTER JOIN LOAN ON LOAN.ACCOUNT_ID=ACCOUNT.ACCOUNT_ID;

-- WAQTD DETAILS OF TABLE CLIENT OF THE GIVEN NAME RAVI AND NANDHA: 
SELECT * FROM CLIENT AS R1 JOIN CLIENT AS R2 WHERE R1.NAME='RAVI'OR R2.NAME='NANDHA';
